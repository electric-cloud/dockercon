<?xml version="1.0" encoding="UTF-8"?>
<exportedData version="63" buildLabel="build_5.0_73229_2014.05.25_05:29:38" buildVersion="5.0.1.73229" passkey="95daec80877f164f13935bac14adde8cf636fe7b">
  <exportPath>/projects/Demo/procedures/Deploy_Pre_Production</exportPath>
  <procedure>
    <procedureName>Deploy_Pre_Production</procedureName>
    <description></description>
    <jobNameTemplate></jobNameTemplate>
    <resourceName>$[environment]</resourceName>
    <timeLimit></timeLimit>
    <timeLimitUnits>minutes</timeLimitUnits>
    <workspaceName></workspaceName>
    <propertySheet>
      <property>
        <propertyName>ec_customEditorData</propertyName>
        <propertySheet>
          <property>
            <propertyName>parameters</propertyName>
            <propertySheet>
              <property>
                <propertyName>artifact_key</propertyName>
                <propertySheet>
                  <property>
                    <propertyName>formType</propertyName>
                    <expandable>1</expandable>
                    <value>standard</value>
                  </property>
                </propertySheet>
              </property>
              <property>
                <propertyName>build_id</propertyName>
                <propertySheet>
                  <property>
                    <propertyName>formType</propertyName>
                    <expandable>1</expandable>
                    <value>standard</value>
                  </property>
                </propertySheet>
              </property>
              <property>
                <propertyName>environment</propertyName>
                <propertySheet>
                  <property>
                    <propertyName>options</propertyName>
                    <propertySheet>
                      <property>
                        <propertyName>list</propertyName>
                        <expandable>1</expandable>
                        <value>development|quality</value>
                      </property>
                      <property>
                        <propertyName>type</propertyName>
                        <expandable>1</expandable>
                        <value>simpleList</value>
                      </property>
                    </propertySheet>
                  </property>
                  <property>
                    <propertyName>formType</propertyName>
                    <expandable>1</expandable>
                    <value>standard</value>
                  </property>
                </propertySheet>
              </property>
              <property>
                <propertyName>port</propertyName>
                <propertySheet>
                  <property>
                    <propertyName>formType</propertyName>
                    <expandable>1</expandable>
                    <value>standard</value>
                  </property>
                </propertySheet>
              </property>
              <property>
                <propertyName>resource</propertyName>
                <propertySheet>
                  <property>
                    <propertyName>formType</propertyName>
                    <expandable>1</expandable>
                    <value>standard</value>
                  </property>
                </propertySheet>
              </property>
            </propertySheet>
          </property>
        </propertySheet>
      </property>
    </propertySheet>
    <formalParameter>
      <formalParameterName>artifact_key</formalParameterName>
      <defaultValue>jpetstore</defaultValue>
      <description></description>
      <expansionDeferred>0</expansionDeferred>
      <required>0</required>
      <type>entry</type>
    </formalParameter>
    <formalParameter>
      <formalParameterName>build_id</formalParameterName>
      <defaultValue>$[/myProject/build_id]</defaultValue>
      <description></description>
      <expansionDeferred>0</expansionDeferred>
      <required>0</required>
      <type>entry</type>
    </formalParameter>
    <formalParameter>
      <formalParameterName>environment</formalParameterName>
      <defaultValue>development</defaultValue>
      <description></description>
      <expansionDeferred>0</expansionDeferred>
      <required>0</required>
      <type>select</type>
    </formalParameter>
    <step>
      <stepName>Retrieve war</stepName>
      <alwaysRun>0</alwaysRun>
      <broadcast>0</broadcast>
      <condition></condition>
      <description></description>
      <errorHandling>failProcedure</errorHandling>
      <exclusiveMode>none</exclusiveMode>
      <parallel>1</parallel>
      <precondition></precondition>
      <releaseMode>none</releaseMode>
      <resourceName></resourceName>
      <subprocedure>Retrieve</subprocedure>
      <subproject>/plugins/EC-Artifact/project</subproject>
      <timeLimit></timeLimit>
      <timeLimitUnits>minutes</timeLimitUnits>
      <workspaceName></workspaceName>
      <actualParameters>
        <property>
          <propertyName>artifactName</propertyName>
          <expandable>1</expandable>
          <value>$[artifact_key]:war</value>
        </property>
        <property>
          <propertyName>artifactVersionLocationProperty</propertyName>
          <expandable>1</expandable>
          <value>/myJob/artifacts</value>
        </property>
        <property>
          <propertyName>filterList</propertyName>
          <expandable>1</expandable>
          <value></value>
        </property>
        <property>
          <propertyName>overwrite</propertyName>
          <expandable>1</expandable>
          <value>update</value>
        </property>
        <property>
          <propertyName>versionRange</propertyName>
          <expandable>1</expandable>
          <value>$[build_id]</value>
        </property>
      </actualParameters>
      <propertySheet>
      </propertySheet>
    </step>
    <step>
      <stepName>Retrieve docker</stepName>
      <alwaysRun>0</alwaysRun>
      <broadcast>0</broadcast>
      <condition></condition>
      <description></description>
      <errorHandling>failProcedure</errorHandling>
      <exclusiveMode>none</exclusiveMode>
      <parallel>1</parallel>
      <precondition></precondition>
      <releaseMode>none</releaseMode>
      <resourceName></resourceName>
      <subprocedure>Retrieve</subprocedure>
      <subproject>/plugins/EC-Artifact/project</subproject>
      <timeLimit></timeLimit>
      <timeLimitUnits>minutes</timeLimitUnits>
      <workspaceName></workspaceName>
      <actualParameters>
        <property>
          <propertyName>artifactName</propertyName>
          <expandable>1</expandable>
          <value>$[artifact_key]:docker</value>
        </property>
        <property>
          <propertyName>artifactVersionLocationProperty</propertyName>
          <expandable>1</expandable>
          <value>/myJob/artifacts</value>
        </property>
        <property>
          <propertyName>filterList</propertyName>
          <expandable>1</expandable>
          <value></value>
        </property>
        <property>
          <propertyName>overwrite</propertyName>
          <expandable>1</expandable>
          <value>update</value>
        </property>
        <property>
          <propertyName>versionRange</propertyName>
          <expandable>1</expandable>
          <value>$[build_id]</value>
        </property>
      </actualParameters>
      <propertySheet>
      </propertySheet>
    </step>
    <step>
      <stepName>Arrange</stepName>
      <alwaysRun>0</alwaysRun>
      <broadcast>0</broadcast>
      <command>rm -rf /opt/jpetstore/$[build_id]&#10;mkdir /opt/jpetstore/$[build_id]&#10;cp -R $[/myJob/artifacts/$[artifact_key]:docker/cacheLocation]/jetty /opt/jpetstore/$[build_id]/docker&#10;cp -R $[/myJob/artifacts/$[artifact_key]:war/cacheLocation]/*.war /opt/jpetstore/$[build_id]/docker</command>
      <condition></condition>
      <description></description>
      <errorHandling>failProcedure</errorHandling>
      <exclusiveMode>none</exclusiveMode>
      <logFileName></logFileName>
      <parallel>0</parallel>
      <postProcessor></postProcessor>
      <precondition></precondition>
      <releaseMode>none</releaseMode>
      <resourceName></resourceName>
      <shell></shell>
      <timeLimit></timeLimit>
      <timeLimitUnits>minutes</timeLimitUnits>
      <workingDirectory></workingDirectory>
      <workspaceName></workspaceName>
      <propertySheet>
      </propertySheet>
    </step>
    <step>
      <stepName>Docker stop</stepName>
      <alwaysRun>0</alwaysRun>
      <broadcast>0</broadcast>
      <command>docker stop $(docker ps -a -q)&#10;docker rm $(docker ps -a -q)&#10;</command>
      <condition></condition>
      <description></description>
      <errorHandling>ignore</errorHandling>
      <exclusiveMode>none</exclusiveMode>
      <logFileName></logFileName>
      <parallel>0</parallel>
      <postProcessor>postp</postProcessor>
      <precondition></precondition>
      <releaseMode>none</releaseMode>
      <resourceName></resourceName>
      <shell></shell>
      <timeLimit></timeLimit>
      <timeLimitUnits>minutes</timeLimitUnits>
      <workingDirectory></workingDirectory>
      <workspaceName></workspaceName>
      <propertySheet>
      </propertySheet>
    </step>
    <step>
      <stepName>Docker build</stepName>
      <alwaysRun>0</alwaysRun>
      <broadcast>0</broadcast>
      <command>docker build -t ecdemo/jpetstore$[build_id] .</command>
      <condition></condition>
      <description></description>
      <errorHandling>failProcedure</errorHandling>
      <exclusiveMode>none</exclusiveMode>
      <logFileName></logFileName>
      <parallel>0</parallel>
      <postProcessor></postProcessor>
      <precondition></precondition>
      <releaseMode>none</releaseMode>
      <resourceName></resourceName>
      <shell></shell>
      <timeLimit></timeLimit>
      <timeLimitUnits>minutes</timeLimitUnits>
      <workingDirectory>/opt/jpetstore/$[build_id]/docker</workingDirectory>
      <workspaceName></workspaceName>
      <propertySheet>
      </propertySheet>
    </step>
    <step>
      <stepName>Docker run</stepName>
      <alwaysRun>0</alwaysRun>
      <broadcast>0</broadcast>
      <command>docker run -p 8080:8080 ecdemo/jpetstore$[build_id] &amp;</command>
      <condition></condition>
      <description></description>
      <errorHandling>failProcedure</errorHandling>
      <exclusiveMode>none</exclusiveMode>
      <logFileName></logFileName>
      <parallel>0</parallel>
      <postProcessor>postp</postProcessor>
      <precondition></precondition>
      <releaseMode>none</releaseMode>
      <resourceName></resourceName>
      <shell></shell>
      <timeLimit></timeLimit>
      <timeLimitUnits>minutes</timeLimitUnits>
      <workingDirectory>/opt/jpetstore/$[build_id]/docker</workingDirectory>
      <workspaceName></workspaceName>
      <propertySheet>
      </propertySheet>
    </step>
  </procedure>
</exportedData>
